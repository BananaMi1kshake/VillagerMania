<!DOCTYPE html>
<html>
<head>
    <title>Autonomous Hamlet</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* (Your existing CSS styles remain here) */
        :root { --tile-size: 24px; --map-width: 20; }
        #game-map { display: grid; grid-template-columns: repeat(var(--map-width), var(--tile-size)); font-family: 'Courier New', Courier, monospace; line-height: var(--tile-size); font-size: 20px; }
        #map-container { width: fit-content; margin: 0 auto; }
        .map-tile { width: var(--tile-size); height: var(--tile-size); text-align: center; user-select: none; }
        .grass { color: #4caf50; }
        .water { color: #2196f3; }
        .villager-emoji { display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; }
        #event-log-panel { position: absolute; top: 10px; right: 10px; width: 250px; background-color: #fdf6e3; border: 2px solid #584b3f; border-radius: 8px; padding: 10px; box-shadow: 3px 3px 5px rgba(0,0,0,0.2); font-family: 'Georgia', serif; color: #584b3f; }
        #event-log-panel h2 { text-align: center; margin-top: 0; font-family: 'Garamond', serif; border-bottom: 1px solid #584b3f; padding-bottom: 5px; }
        #event-log-list { list-style-type: none; padding: 0; margin: 0; max-height: 200px; overflow-y: auto; cursor: pointer; }
        #event-log-list li { padding: 4px 0; border-bottom: 1px dotted #c8bca9; font-size: 14px; }
        #conversation-modal-content { max-width: 400px; }
        #conversation-header { font-weight: bold; text-align: center; padding-bottom: 10px; border-bottom: 1px solid #ccc; margin-bottom: 10px; }
        #conversation-log { display: flex; flex-direction: column; gap: 10px; }
        .message-bubble { padding: 8px 12px; border-radius: 18px; max-width: 70%; word-wrap: break-word; }
        .message-bubble.initiator { background-color: #007bff; color: white; align-self: flex-end; }
        .message-bubble.responder { background-color: #e9e9eb; color: black; align-self: flex-start; }

        /* NEW: Styles for the new onboarding options */
        .onboarding-divider {
            margin: 20px 0;
            border-bottom: 1px solid #34495e;
        }
        #watch-only-button {
            background-color: #7f8c8d;
            color: white;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #34495e;
        }
    </style>
</head>
<body>
    <div id="roster-panel">
        <h2>Villagers</h2>
        <ul id="roster-list"></ul>
    </div>

    <div id="event-log-panel">
        <h2>The Hamlet Herald</h2>
        <ul id="event-log-list"></ul>
    </div>

    <div class="main-content">
        <h1>The Autonomous Hamlet</h1>
        <div id="onboarding-screen" class="modal-overlay">
            <div class="modal-content">
                <h3>Create Your Villager</h3>
                <input type="text" id="name-input" placeholder="Villager Name" maxlength="10">
                <select id="emoji-select"></select>
                <button id="join-button">Join Village</button>
                
                <!-- NEW: "Watch Only" option -->
                <div class="onboarding-divider"></div>
                <button id="watch-only-button">I just want to watch</button>
            </div>
        </div>
        <div id="map-container">
            <div id="game-map"></div>
        </div>
        <div id="player-controls" style="display: none;">
        </div>
    </div>

    <div id="profile-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button id="close-profile-button">X</button>
            <div id="profile-details"></div>
        </div>
    </div>

    <div id="conversation-modal" class="modal-overlay" style="display: none;">
        <div id="conversation-modal-content" class="modal-content">
            <button id="close-conversation-button">X</button>
            <div id="conversation-header"></div>
            <div id="conversation-log"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>
